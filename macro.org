
Макросы. Наброски к докладу.

* WTF Macro?
** Краткий пересказ википедии - макросы, это ваще что?
** Как появилась необходимость делать подстановку в исходном коде до трансляции сорцов в машкод
*** Макропроцессор m4
**** Когда обычного ЯВУ недостаточно..
     Как оно работает - основные принципы препроцессинга

     Макроопределения и макровызовы (с параметрами):

     #+BEGIN_EXAMPLE
       define('exch', '$2, $1')
       ⇒
       exch('arg1', 'arg2')
       ⇒ arg2, arg1
     #+END_EXAMPLE

**** Что может m4?
     - Назначение/удаление переменных (define/undefile)
     - B в стеке тоже (pushdef/popdef)
     - Подстановка в зависимости от переменной (ifdef)
     - Управление 10 виртуальными потоками вывода
     - Вычисление выражений (eval)
     - Операции со строками (substr)
     - Подстановка содержимого файлов (include)
     - Выполнение shell-команд (syscmd)
**** Что им можно сделать?
     - Генерация кода из декларативной спецификации
     - Генерация SQL во время компиляции
     - Документирование
     - Администрирование (конфиги)

*** TODO Макроподстановки в С/С++
    Закат солнца вручную. Короче, такой хоккей нам не нужен, надо не
    токенами жонглировать, а выходить на уровень AST. Oh, shi...,
    s-expessions - это же AST в текстовой форме!!!
*** Макропроцессор Lisp для чайников


* Как нам прохавать AST - патчим граф выполнения - типичные примеры -
   профайлинг, логгинг, аспекты
* Что если делать то же самое, но не обязательно до компиляции. Когда
   можно раскрывать макросы - read-time, compile-time, load-time. Что
   такое eval-when и какую пользу оно может нанести (edited)
* We need to go deeeeeper - макросы, которые создают макросы
* Практичекская применимость - Оптимизация кода на лету (по
   swizard-у)
* В продолжение предыдущего - создание DSL на макросах
* Немного о гигиене
* Программа, которая меняет саму себя - mutation engine на макросах
   (не уверен осилю ли я это и осилит ли это кто-нибудь понять
* Макросы в других языках и сравнение подходов (галопом, без
   погружения)
* Нетрадиционно ориентированное программирование:
    Инструментированный код, оптимизация черного ящика, исполняемые
    спецификации и прочее
